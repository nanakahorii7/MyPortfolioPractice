var Dotinstall=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))o.call(n,c)&&(a[c]=n[c]);if(i){s=i(n);for(var d=0;d<s.length;d++)r.call(n,s[d])&&(a[s[d]]=n[s[d]])}}return a}},function(e,t,n){"use strict";var i={TAB:9,ENTER:13,ESCAPE:27,SPACE:32,ARROW_UP:38,ARROW_DOWN:40,SLASH:{PRESS:47},INPUT_JAPANESE:229};e.exports=i},function(e,t,n){"use strict";var i=n(0),o=n(3),r=n(4),s=n(8),a=n(9),u=n(10),c=n(11),d=n(12),l=n(16),f=n(22),h=n(1),p=n(23),v=n(24),m=n(27),_=n(28),g=n(29),b=n(31),y=n(32),$=n(33),w=n(34),x=n(36),k=n(37),C=n(38),T=n(41),S=n(46),E=n(50),H=n(52),M=n(53),j={assign:i,cookie:f,editor:T,event:o,exercise:y,fileUpload:r,form:d,forum:x,ga:s,guestUser:H,hotKey:M,keyCode:h,layout:_,like:k,location:$,navigator:a,overlaySidebar:b,payment:{callbacks:C.callbacks},player:{alert:S.alert},preview:u,resize:v,responsive:l,sizes:m,tab:{scroll:E.scroll},textDetection:w,uiGuide:g,util:p,videoController:c};if(void 0===A)var A=j;else A=i(A,j);e.exports=A},function(e,t,n){"use strict";var i=function(){return{cancel:function(e){return e.preventDefault(),e.stopPropagation(),!1}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t="これは画像を表示するためのタグです",i=n(5).Promise,o=[],r=[],s=!1,a=!0,u=!1,c={};function d(e,t,n){var i,r;i=c.generateFileKey(e),void 0!==n.create_element&&(r=n.create_element(i,e.name)),l(e,t,r,n).then(n.success,n.error),o[i]=!0}function l(e,t,n,o){return t=[t,"name="+encodeURIComponent(e.name),"type="+encodeURIComponent(e.type)].join("&"),new i(function(i,r){var s=null,a=new FileReader;function u(){if(s){var a=new XMLHttpRequest;a.addEventListener("load",function(t){200!==a.status?413===a.status?r({el:n,error_message:"ファイルサイズが大きすぎます。"}):r({el:n,error_message:$.parseJSON(a.responseText).error.message}):i({el:n,response:$.parseJSON(a.responseText),file:e})}),a.addEventListener("error",function(){r({el:n,error_message:"Network error"})}),a.open("POST",t),a.send(s),o.start&&o.start()}else setTimeout(u,10)}a.addEventListener("loadend",function(){s=a.result,u()}),a.readAsArrayBuffer(e)})}function f(e,t){var n=$('<input type="hidden" name="file_id[]">').attr("id","file_id_"+t.file_id).data("file-id",t.file_id).val(t.file_id),i=$('<input type="hidden">').attr("id","file_name_"+t.file_id).attr("name","file_name_"+t.file_id).data("file-id",t.file_id).val(t.file_name),o=$('<input type="hidden">').attr("id","mime_type_"+t.file_id).attr("name","mime_type_"+t.file_id).data("file-id",t.file_id).val(t.mime_type);r.push(n),r.push(i),r.push(o),$(e).append(n).append(i).append(o)}function h(e){$(e).wrap('<form style="display:inline;">').closest("form").get(0).reset(),$(e).unwrap()}return c.uploadFilesByDataTransfer=function(e,t,n){var i;for(i=0;i<e.files.length;i++)d(e.files[i],t,n)},c.generateFileKey=function(e){return e.size+"_"+e.name},{addHiddenField:f,afterRemove:function(e){var t,n;for(t=0;t<r.length;t++)r[t].data("file-id")-0==e-0&&(r[t].remove(),r.splice(t,1),t--);n=$("#question_file_"+e).data("file-key"),o[n]=void 0},alwaysEmbed:function(e){s=e},clearAppendedHiddenFields:function(){var e;for(e=0;e<r.length;e++)r[e].remove();r=[]},enableDragAndDrop:function(t,n,i){t.on("dragenter",function(e){Dotinstall.event.cancel(e)}).on("dragenter",function(){$(this).addClass("over")}).on("dragleave",function(){$(this).removeClass("over")}).on("dragover",function(e){Dotinstall.event.cancel(e)}).on("drop",function(t){return e=$(this),c.uploadFilesByDataTransfer(t.originalEvent.dataTransfer,n,i),$(this).removeClass("over"),Dotinstall.event.cancel(t),!1})},exec:l,getTargetElement:function(){return e},insertMarkdownGuideMessage:function(e){a=e},manage:d,setTargetElement:function(t){e=t instanceof jQuery?t:$(t)},useFilePermalink:function(e){u=e},whenUploadSuccess:function(e,n,i){e.response.is_image_file?function(e,n,i){var o,r,s;s=u?e.response.file_permalink:e.response.file_id,o=a?"("+s+":"+t+")":"("+s+")",r="!["+e.file.name.replace(/\[\]/,"")+"]"+o,Dotinstall.form.insertAtCaret($(n.textarea_id),r),void 0!==e.el&&e.el.hide(),void 0!==i&&i()}(e,n,i.image):s?function(e,t,n){var i=["["+e.file.name.replace(/\[\]/,"")+"]","("+e.response.file_permalink+")"].join("");Dotinstall.form.insertAtCaret($(t.textarea_id),i),void 0!==e.el&&e.el.hide(),void 0!==n&&n()}(e,n,i.text):function(e){!function(e){e.el.attr("id","question_file_"+e.response.file_id).removeClass("uploading").addClass("success"),e.response.is_image_file?e.el.find("i:first").removeClass("fa-file").addClass("fa-file-image-o"):e.el.find("i:first").removeClass("fa-file").addClass("fa-file-text-o"),e.el.find("i.fa-times").data("file-id",e.response.file_id)}(e)}(e),f(n.form_id,{file_id:e.response.file_id,file_name:e.file.name,mime_type:e.file.type}),h(n.input_file_id)},whenUploadError:function(e){e.el.addClass("error"),$("<li>").text(e.el.text()+"はアップロードできませんでした。（"+e.error_message+"）").appendTo("#upload_errors"),$("#upload_errors").fadeIn(),h("#select_upload_file")}}}();e.exports=i},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,r=void 0,s=void 0,a=function(e,t){p[o]=e,p[o+1]=t,2===(o+=2)&&(s?s(v):m())};var u="undefined"!=typeof window?window:void 0,c=u||{},d=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(v,1)}}var p=new Array(1e3);function v(){for(var e=0;e<o;e+=2){(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0}o=0}var m=void 0;function _(e,t){var n=this,i=new this.constructor(y);void 0===i[b]&&L(i);var o=n._state;if(o){var r=arguments[o-1];a(function(){return O(o,i,r,n._result)})}else j(n,i,e,t);return i}function g(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(y);return S(t,e),t}m=l?function(){return t.nextTick(v)}:d?function(){var e=0,t=new d(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():f?function(){var e=new MessageChannel;return e.port1.onmessage=v,function(){return e.port2.postMessage(0)}}():void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(v)}:h()}catch(e){return h()}}():h();var b=Math.random().toString(36).substring(2);function y(){}var $=void 0,w=1,x=2,k={error:null};function C(e){try{return e.then}catch(e){return k.error=e,k}}function T(t,n,i){n.constructor===t.constructor&&i===_&&n.constructor.resolve===g?function(e,t){t._state===w?H(e,t._result):t._state===x?M(e,t._result):j(t,void 0,function(t){return S(e,t)},function(t){return M(e,t)})}(t,n):i===k?(M(t,k.error),k.error=null):void 0===i?H(t,n):e(i)?function(e,t,n){a(function(e){var i=!1,o=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,function(n){i||(i=!0,t!==n?S(e,n):H(e,n))},function(t){i||(i=!0,M(e,t))},e._label);!i&&o&&(i=!0,M(e,o))},e)}(t,n,i):H(t,n)}function S(e,t){e===t?M(e,new TypeError("You cannot resolve a promise with itself")):!function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?H(e,t):T(e,t,C(t))}function E(e){e._onerror&&e._onerror(e._result),A(e)}function H(e,t){e._state===$&&(e._result=t,e._state=w,0!==e._subscribers.length&&a(A,e))}function M(e,t){e._state===$&&(e._state=x,e._result=t,a(E,e))}function j(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+w]=n,o[r+x]=i,0===r&&e._state&&a(A,e)}function A(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?O(n,i,o,r):o(r);e._subscribers.length=0}}function O(t,n,i,o){var r=e(i),s=void 0,a=void 0,u=void 0,c=void 0;if(r){if((s=function(e,t){try{return e(t)}catch(e){return k.error=e,k}}(i,o))===k?(c=!0,a=s.error,s.error=null):u=!0,n===s)return void M(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,u=!0;n._state!==$||(r&&u?S(n,s):c?M(n,a):t===w?H(n,s):t===x&&M(n,s))}var D=0;function L(e){e[b]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var P=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[b]||L(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&H(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===$&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===g){var o=C(e);if(o===_&&e._state!==$)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===I){var r=new n(y);T(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===$&&(this._remaining--,e===x?M(i,n):this._result[t]=n),0===this._remaining&&H(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){return n._settledAt(w,t,e)},function(e){return n._settledAt(x,t,e)})},e}();var I=function(){function e(t){this[b]=D++,this._result=this._state=void 0,this._subscribers=[],y!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){S(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return I.prototype.then=_,I.all=function(e){return new P(this,e).promise},I.race=function(e){var t=this;return i(e)?new t(function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},I.resolve=g,I.reject=function(e){var t=new this(y);return M(t,e),t},I._setScheduler=function(e){s=e},I._setAsap=function(e){a=e},I._asap=a,I.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=I},I.Promise=I,I})}).call(this,n(6),n(7))},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],d=!1,l=-1;function f(){d&&u&&(d=!1,u.length?c=u.concat(c):l=-1,c.length&&h())}function h(){if(!d){var e=a(f);d=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||d||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=function(){return{tracking:function(e,t,n){if("undefined"==typeof ga)return!1;4===arguments.length?ga("send","event",e,t,n,arguments[3]):5===arguments.length?ga("send","event",e,t,n,arguments[3],arguments[4]):ga("send","event",e,t,n)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o,r,s,a,u,c,d,l=function(e){return null!==navigator.userAgent.match(e)};function f(e){var t;return null===(t=e.exec(navigator.userAgent))?null:t[1]}return{detect:function(){return e=l(/^Mozilla.+(iPhone|iPod|iPhone Simulator);.+iPhone OS.+AppleWebKit/)||l(/Android.+Mobile/),t=l(/iPad;.+ OS.+AppleWebKit/)||l(/Android/)&&navigator.userAgent.indexOf("Mobile")<0,n=l(/Android.+Chrome/),i=l(/^Mozilla\/.+AppleWebKit\/.+Chrome\/.+Safari.+$/),o=l(/Firefox/),r=l(/AppleWebKit.+Safari/)&&!i,s=l(/ OPR\/[0-9]/),l(/MSIE/)?(a=!0,d=f(/MSIE ([\d\.]+)/)):l(/Trident/)&&(a=!0,"11.0"!==(d=f(/rv:([\d\.]+)/))&&(d=null)),u=l(/MSIE 8\.0/),c=l(/^Mozilla\/[\d\.]+ \(Windows NT 6\.3(; WOW\d+)?\) AppleWebKit\/[\d\.]+ \(KHTML, like Gecko\) Chrome\/[\d\.]+ Safari\/[\d\.]+$/),{isSmartphone:e,isTablet:t,isAndroidChrome:n,isChrome:i,isFirefox:o,isSafari:r,isOpera:s,isIE:a,isIE8:u,isWin81Chrome:c,isAvailableFlash:function(){if(navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0;try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){return!1}return!1},ieVersion:d}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{set:function(e,t){$.post("/preview/set.json",{}).done(function(t){e(t.url)}).fail(function(){t()})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){function e(e){HMHM.movie.vimeo.player.seekTo(HMHM.movie.vimeo.player.getCurrentTime()+e)||HMHM.movie.videojs.player.seekTo(HMHM.movie.videojs.player.getCurrentTime()+e)}return{playOrPause:function(){var e;void 0!==HMHM.movie.vimeo.player.getPlayerState()?e=HMHM.movie.vimeo.player.getPlayerState():void 0!==HMHM.movie.videojs.player.getPlayerState()&&(e=HMHM.movie.videojs.player.getPlayerState()),1===e?HMHM.movie.vimeo.player.pauseVideo()||HMHM.movie.videojs.player.pauseVideo():HMHM.movie.vimeo.player.playVideo()||HMHM.movie.videojs.player.playVideo()},forwardTo:e,rewindTo:function(t){e(-1*t)}}}();e.exports=i},function(e,t,n){"use strict";var i=n(13),o=n(14),r=n(15),s=function(){return{focusByKey:function(e,t,n){if(e.which!==t)return!1;var i=e.target||e.srcElement;(1!==i.nodeType||"TEXTAREA"!==i.nodeName&&"INPUT"!==i.nodeName)&&(e.preventDefault(),n.focus(),n.select())},inputTabChar:function(e,t){var n,i,o;if(9===t.keyCode)return void 0!==t.preventDefault&&t.preventDefault(),i=e.get(0).selectionStart,o=e.get(0).selectionEnd,n=e.val(),e.val(n.substr(0,i)+"\t"+n.substr(o)),e.get(0).selectionStart=i+1,e.get(0).selectionEnd=i+1,!1},insertAtCaret:function(e,t){var n,i,o,r,s=!0;void 0!==arguments[2]&&!1===arguments[2]&&(s=!1),n=e.get(0).selectionStart,i=e.get(0).selectionEnd,r=""+(o=e.val()).substr(0,n),s&&(r+="\n"),r+=t+o.substr(i),e.val(r),e.get(0).selectionStart=n+t.length+1,e.get(0).selectionEnd=n+t.length+1},clickToMention:o,quote:i,suggester:r}}();e.exports=s},function(e,t,n){"use strict";var i=function(){return{execute:function(e,t){var n,i,o,r="";if(e.which==="r".charCodeAt(0)&&!e.metaKey&&!e.ctrlKey&&(1!==(o=e.target||e.srcElement).nodeType||"TEXTAREA"!==o.nodeName&&"INPUT"!==o.nodeName)&&1===$(t).length&&!$(t).is(":hidden")&&(e.preventDefault(),""!==(n=window.getSelection().toString()))){if(""!==(i=$(t).val()))for(;!/(\n{2}|\r{2}|\r\n\r\n)$/.test(i);)i+="\n";r+=(n=n.split(/\r\n|\r|\n/).map(function(e){return"> "+e}).join("\n"))+"\n\n",$(t).focus().val(i+r)}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){function e(e,t){1===$(t).length&&($(t).is(":hidden")||($(t).focus(),Dotinstall.form.insertAtCaret($(t),"@"+e+" ",!1)))}return{init:function(t){var n,i=document.getElementsByClassName("click-to-mention");for(n=0;n<i.length;n++)i[n].addEventListener("click",function(){e(this.dataset.username,t)})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,i,o,r=n(1),s=!1,a=0,u="";function c(){var e,n;for(n=new RegExp("^"+u);t.firstChild;)t.removeChild(t.firstChild);for(e=0;e<i.length;e++)n.test(i[e])&&t.appendChild(d(i[e]));t.firstChild&&t.firstChild.classList.add("selected")}function d(e){var t=document.createElement("li");return t.textContent=e,t.addEventListener("mouseover",function(){this.classList.add("selected")}),t.addEventListener("mouseout",function(){this.classList.remove("selected")}),t.addEventListener("click",function(){a>0&&l()}),t}function l(){var e,n;for(e=0;e<t.children.length;e++)if(t.children[e].classList.contains("selected")){n=t.children[e].textContent.substr(u.length)+" ",Dotinstall.form.insertAtCaret($(o),n,!1);break}}function f(e){!function(e){s=!Dotinstall.navigator.detect().isFirefox&&e===r.INPUT_JAPANESE}(e.which),0===a||s||e.which!==r.TAB&&e.which!==r.ARROW_UP&&e.which!==r.ARROW_DOWN&&e.which!==r.ENTER||e.preventDefault()}function h(e){switch(e){case r.TAB:case r.ENTER:return l(),v(),!0;case r.ARROW_UP:return function(){var e=document.querySelector(".suggester-list > .selected");e.classList.remove("selected"),e.previousSibling?e.previousSibling.classList.add("selected"):t.lastChild.classList.add("selected")}(),!0;case r.ARROW_DOWN:return function(){var e=document.querySelector(".suggester-list > .selected");e.classList.remove("selected"),e.nextSibling?e.nextSibling.classList.add("selected"):t.firstChild.classList.add("selected")}(),!0}return!1}function p(e){a>0&&h(e.which)||(this.value.substr(this.selectionStart-1,1)!==this.dataset.suggesterTrigger?0!==a&&(this.selectionStart<a?v():(u=this.value.substr(a,this.selectionStart-a),c(),0===t.children.length&&v())):function(){var e;c(),a=o.selectionStart,e=$(o).textareaHelper("caretPos"),t.style.top=e.top+"px",t.style.left=e.left+"px",t.classList.remove("hide")}())}function v(){a=0,u="",t.classList.add("hide")}return{init:function(n){(o=n).parentNode.style.position="relative",(e=document.createElement("div")).classList.add("suggester-container"),function(e){i=e,(t=document.createElement("ul")).classList.add("suggester-list"),t.classList.add("hide"),c()}(o.dataset.suggesterList.split(",")),e.appendChild(t),o.parentNode.insertBefore(e,o.nextSibling),o.addEventListener("keydown",f),o.addEventListener("keyup",p),o.addEventListener("click",p)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=n(17),t=n(18),i=n(20);return{common:n(21),player:t,question:i,topbar:e}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=200,n=80,i=$("#player_min_width").val()-0+36,o=$(window).width(),r=o,s=[],a=!1,u=$(".navbar-inner:first");function c(){$("#global_menu").show().find("li").show(),$("#global_dropdown_menu").find("li.movable").each(function(){if(e){var t=$(this).data("menu-index")-1,n=$("#global_menu").find("li:eq("+t+")");$(this).insertAfter(n)}else $(this).insertBefore($("#global_menu").find("li:last"))}),e||($("#dropdown_of_login_btn").hide(),$("#topbar_login_button > a").removeClass("prepended-to-dropdown"))}function d(t,n){!e&&t.length>0&&($("#dropdown_of_login_btn").show(),$("#topbar_login_button > a").addClass("prepended-to-dropdown")),$("#global_menu").show().find("li.movable").each(function(){-1!==t.indexOf($(this).data("menu-index"))&&(e?$(this).insertAfter("#global_dropdown_menu > li:eq(0)"):$(this).appendTo("#global_dropdown_menu"))}),n?$("#global_menu").find("li.disappear").hide():$("#global_menu").find("li.disappear").show()}function l(e,i){var o=t-(i-e);o<n&&(o=n),$("#q_in_topbar").width(o)}o>1100?(c(),u.width("auto"),$("#q_in_topbar").width(t)):o>676&&o<=1100?(c(),o<726?(s=[3,2,1],l(o,740)):o<840?(s=[3,2],l(o,846)):o<954?(s=[3],l(o,960)):o<1076&&l(o,1082),d(s,a),u.width(o),$("#topbar_search").fadeIn()):(o<622?(a=!0,l(o,648)):l(o,740),d([3,2,1],a),o<i&&(r=i),u.width(r),$("#topbar_search").fadeIn())}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=n(0),t=n(19);function i(n){n=e(t.lesson_show,n);var i=$(window).width(),o=n.sidebarWidth,r=n.playerMaxWidth,s=n.playerMaxHeight;return i>n.defaultBodyWidth||(i>n.playerShrinkThres&&i<=n.defaultBodyWidth?s=9*(r=i>n.sidebarStartHideWidth?i-o-n.totalHorizontalMargin:n.playerWidthWhileSidebarHiding)/16:((r=i-n.playerHorizontalMargin)<n.playerMinWidth&&(r=n.playerMinWidth),s=9*r/16)),{width:r,height:s}}return{apply:function(e,t){var n=i(e);$(window).width()<954?$("#question_floating_box").removeClass("show"):$("#question_floating_box").addClass("show"),$("#videojs_player, #vimeo_player").width(n.width).height(n.height),$(".unlock-background").height(n.height),t(n.width,n.height)},calcSize:i}}();e.exports=i},function(e,t,n){"use strict";var i={lesson_show:{defaultBodyWidth:1140,playerShrinkThres:676,sidebarStartHideWidth:1012,playerWidthWhileSidebarHiding:640,totalHorizontalMargin:32,playerHorizontalMargin:32,playerMaxWidth:768,playerMaxHeight:432}};e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=$(window).width(),n=768,i=696;t<1100&&(t>=710?((n=t-336)<636&&(n=636),i=n-72):((n=t-32)<560&&(n=560),i=n-2)),e(n,i)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{apply:function(e){var t=$(window).width(),n=768;t<1100&&(t>=710?(n=t-336)<636&&(n=636):(n=t-32)<560&&(n=560)),e(n)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{get:function(e){var t;return"string"!=typeof document.cookie?null:(t=document.cookie.split("; "),"string"==typeof e?function(e,t){var n,i;for(n=0;n<t.length;n++)if((i=t[n].split("="))[0]===e)return decodeURIComponent(i[1]);return null}(e,t):"[object RegExp]"===toString.call(e)?function(e,t){var n,i,o=[];for(n=0;n<t.length;n++)i=t[n].split("="),e.test(i[0])&&(o[o.length]={name:i[0],value:decodeURIComponent(i[1])});return o}(e,t):null)},remove:function(e,t){var n;(function(e){var t,n=document.cookie.split("; ");for(t=0;t<n.length;t++)if(n[t].split("=")[0]===encodeURIComponent(e))return!0;return!1})(e)&&(n=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",void 0!==t&&(n+="; path="+t),document.cookie=n)},set:function(e,t,n,i){var o;if("string"!=typeof document.cookie)return null;o=encodeURIComponent(e)+"="+encodeURIComponent(t),void 0!==n&&(o+="; expires="+new Date((new Date).getTime()+1e3*n).toGMTString()),void 0!==i&&(o+="; path="+i),document.cookie=o}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{highlight:function(){$("pre").each(function(e,t){hljs.highlightBlock(t)})},removeSpaceChar:function(e){return e.replace(/\s/g,"")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,i,o,r,s,a,u,c,d,l,f=2,h=!1,p={west:!1,east:!1};function v(){h=!1,u.hide(),$("body").removeClass("disable-select"),l()}function m(){var n=e-t;i-n<p.west?(s.width(p.west),a.width($("body").width()-s.outerWidth())):o+n<p.east?(s.outerWidth($("body").width()-a.outerWidth()),a.width(p.east)):(s.width(i-n),a.width(o+n)),a.offset({top:a.offset().top,left:s.outerWidth()}),_(),d()}function _(){var e=r.hasClass("resize-handle-bold")?0:6;r.offset({top:s.offset().top,left:s.outerWidth()-e}),r.height(function(){var e;e=$(document).height()-$(".dotinstall-normal-topbar").outerHeight()-f,$("#footer").is(":visible")&&(e-=$("#footer").outerHeight());return e}()),r.height()>s.outerHeight()&&r.height(s.outerHeight()-f)}function g(e){return 1*e.css("min-width").replace(/px$/,"")}return{apply:function(n,f,b,y,w,x){r=n,s=f,a=b,c=y||function(){},d=w||function(){},l=x||function(){},p.west=g(s),p.east=g(a),r.on("mousedown",function(t){!function(t){h=!0,e=t.pageX,i=s.width(),o=a.width(),u.show(),$("body").addClass("disable-select"),c()}(t)}).on("mouseup",function(){v()}),_(),(u=$("<div>")).attr("id","resize_mask").addClass("resize-mask").appendTo("body"),u.on("mouseup",function(){v()}),$(document).on("mousemove",function(e){!0===h&&(t=e.pageX,m())}),$(window).on("resize",function(){_()})},doResizeMemo:function(){var e=document.getElementById("memo");null!==e&&($("#memo_body").height($("#memo_form").height()-$("#memo_footer").outerHeight()),e.style.height=$("#memo_body").height()+"px")},isResizable:function(){return void 0!==s&&s.width()>p.west||void 0!==a&&a.width()>p.east},player:n(25),setHandlerOffset:_,update:m,vertical:n(26),watcher:function(e){var t;e=e,this.watchHeightChange=function(n){t=e.clientHeight,function i(){var o;o=e.clientHeight,t!==o&&n(),t=o,e.watchHeightChangeTimer&&clearTimeout(e.watchHeightChangeTimer),e.watchHeightChangeTimer=setTimeout(i,100)}()}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{exec:function(){var e,t,n;return e=document.getElementById("videojs_player"),n=(t=$("#main").width())/16*9,null!==e&&(e.width=t,e.height=n),$("#videojs_player, #vimeo_player").width(t).height(n),$("video").width(t).height(n),$(".unlock-background").height(n),{width:t,height:n}}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o,r,s,a,u,c,d,l,f,h=!1,p={north:!1,south:!1};function v(){h=!1,c.hide(),$("body").removeClass("disable-select"),f(e-t)}function m(){o.offset({top:r.offset().top+r.outerHeight(),left:r.offset().left}),o.width(a.width())}function _(e){return 1*e.css("min-height").replace(/px$/,"")}return{apply:function(g,b,y,w,x,k,C,T){o=g,r=b,s=y,a=w,u=x,d=k||function(){},l=C||function(){},f=T||function(){},p.north=_(r),p.south=_(s),o.on("mousedown",function(t){!function(t){h=!0,e=t.pageY,n=r.outerHeight(),i=s.outerHeight(),c.show(),$("body").addClass("disable-select"),d()}(t)}).on("mouseup",function(){v()}),m(),(c=$("<div>")).attr("id","resize_mask_v").addClass("resize-mask").appendTo("body"),c.on("mouseup",function(){v()}),$(document).on("mousemove",function(o){!0===h&&(t=o.pageY,function(){var o=e-t;n-o<p.north?(r.outerHeight(p.north),s.outerHeight(u.height()-p.north)):i+o<p.south?(r.outerHeight(u.height()-p.south),s.outerHeight(p.south)):(r.outerHeight(n-o),s.outerHeight(i+o)),s.offset({top:r.offset().top+r.outerHeight(),left:s.offset().left}),m(),l()}())}),$(window).on("resize",function(){m()})},setHandlerOffset:m}}();e.exports=i},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";var i=function(){var e="(max-width: 686px)";function t(){return window.matchMedia(e).matches}function n(){$("#main").offset({top:$(".navbar-fixed-top").outerHeight()})}return{adjustBreadcrumb:function(e){var t=$("#breadcrumb").find("li"),n=0;$("#breadcrumb").width(e),t.each(function(i){i===t.length-1?$(this).width(e-n-4):n+=$(this).outerWidth()})},adjustCenterCard:function(e){var t;(t=$(".vjs-center-card")).length>0&&t.css("marginTop",(e.height-t.height())/2)},adjustEditorModalForIE11:function(){var e=Dotinstall.navigator.detect();e.isIE&&"11.0"===e.ieVersion&&$("#side_editor_intro_modal").css({left:($("#side_editor_intro_mask").width()-$("#side_editor_intro_modal").width())/2})},adjustMainAreaMinHeight:function(){t()?$("#main").css({minHeight:"auto"}):$("#main").css({minHeight:"none"})},adjustLessonContentsHeight:function(){var e=Math.max($("#overlay_sidebar_contents").height(),$("#main_contents").height()+Dotinstall.sizes.MAIN_TOP_PADDING,$("#sidebar_contents").height());$("#overlay_sidebar").height(e),$("#main").outerHeight(e),$("#sidebar").height(e),function(){if(0===$("#main_overlay").length)return!1;$("#main_overlay").css({top:$("#main").offset().top+"px"}).height($("#main").outerHeight()),t()?$("#main_overlay").width($("#main").outerWidth()):$("#main_overlay").width($("#main").outerWidth()+$("#sidebar").width())}()},adjustSidebarContentsHeight:function(){0!==$("#side_bottom_wrapper").length&&($("#side_bottom_wrapper").outerHeight($(window).height()-$("#sidebar").position().top-$("#side_tab_container").outerHeight()),$("#side_preview").height($("#side_preview_container").height()-$("#side_preview_header").outerHeight()))},getMainContentsRatio:function(){return $("#main").outerWidth()/($("#main").outerWidth()+$("#sidebar").outerWidth())},mustBeSingleCol:t,resizeMainAndSidebar:function(){var e=$(window).width()<$("body").width()?$("body").width():$(window).width(),t=Math.round(e*Dotinstall.sizes.main.CONTENTS_RATIO),n=e-t;n<Dotinstall.sizes.sidebar.minWidth?t=e-(n=Dotinstall.sizes.sidebar.minWidth):t<Dotinstall.sizes.main.minWidth&&(n=e-(t=Dotinstall.sizes.main.minWidth)),$("#main").outerWidth(t),$("#sidebar").outerWidth(n)},updateMainOffsetTop:n,updateSidebarTop:function(e){$("#sidebar").css({top:$(".navbar-fixed-top").outerHeight()+e})},updateSidebarSettings:function(e){Dotinstall.cookie.set("sidebar_width",$("#sidebar").width(),31536e3,e),Dotinstall.sizes.sidebar.width=$("#sidebar").width()},whenSignupTopBarHidden:function(){n(),t()||($("#sidebar").offset({top:$("#main").offset().top}),$("#resize_handle").offset({top:$("#main").offset().top})),$("#overlay_sidebar").offset({top:$("#main").offset().top}),$("#main_overlay").css({top:$("#main").offset().top+"px"})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{cookie:n(30),done:function(e){$.post("/ui_guide/done.json",{guide_name:e,done:1,one_time_token:$(".one_time_token").val()})},reset:function(e){$.post("/ui_guide/reset.json",{guide_name:e,one_time_token:$(".one_time_token").val()}).done(function(){location.reload()})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{sidebarResize:function(){Dotinstall.cookie.set("hide_guide_sidebar_resize",1,31536e3,"/lessons/")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){function e(){return $("#overlay_sidebar").hasClass("fold")}function t(){$("#overlay_sidebar").removeClass("fold"),Dotinstall.layout.adjustLessonContentsHeight(),$("#main_overlay").fadeIn(),setTimeout(function(){$(".autoplay").show()},300)}function n(e){$("#overlay_sidebar").find(".accordion").each(function(){e?$("#"+$(this).data("accordion")).slideUp():$("#"+$(this).data("accordion")).hide()})}return{enable:function(){$("#fold_sidebar_box, #main_overlay").on("click",function(){$("#overlay_sidebar").addClass("fold"),$("#main_overlay").fadeOut(),n(!1),$(".autoplay").hide()}),$("#side_package_name_header, .ovs-list-header").on("click",function(n){if("fold_sidebar"===n.target.id)return!1;e()&&t()}),$("#overlay_sidebar.fold").on("click",function(n){e()&&t()}),$("#overlay_sidebar").find(".accordion").each(function(){!function(e){e.on("click",function(){var t="#"+e.data("accordion");$(t).is(":visible")?$(t).slideUp(function(){Dotinstall.layout.adjustLessonContentsHeight()}):(n(!0),$(t).slideDown(function(){Dotinstall.layout.adjustLessonContentsHeight()}))})}($(this))})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n=1,i=2,o=3,r=4;return{setId:function(t){if(void 0!==e)return!1;e=t},setAnswerTypeId:function(e){if(void 0!==t)return!1;t=e},sendingAnswerButtonClicked:function(){$("#exer_submit").on("click",function(){$(this).prop("disabled",!0),$(".exer-answer-choice").prop("disabled",!0),function(s){var a;a=function(){var e;switch(t){case n:case i:break;case o:e=$(".exer-answer-choice:checked").val();break;case r:e=[],$(".exer-answer-choice:checked").each(function(){e.push($(this).val())})}return e}(),$.post("/exercises/"+e+"/answer.json",{id:e,"answers[]":a,user_id:$("#user_id").val(),one_time_token:$(".one_time_token").val()}).done(function(e){!function(e,t){var n;$("#exer_try_histories").append(e.html.choiced_history).append(e.html.choiced_result),n=$("#exer_try_histories").children().last(),setTimeout(function(){n.fadeIn().find(".typing-bubble").fadeIn()},500),setTimeout(function(){$(".typing-bubble:visible").fadeOut()},2e3),setTimeout(function(){n.find(".exer-form").fadeIn().end().find(".exer-choice-created-at").fadeIn(),!0===e.got_correct?(t.correct(),setTimeout(function(){$("#exer_explanation").append(e.html.explanation)},100)):t.incorrect(),t.always()},2400)}(e,s)}).fail(function(){s.fail(),s.always()})}({correct:function(){$("#exer_answer_form").slideUp()},incorrect:function(){},fail:function(){},always:function(){$("#exer_submit").prop("disabled",!1),$(".exer-answer-choice").prop("disabled",!1)}})})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{buildLocationSearch:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+"="+e[t]);return 0===n.length?"":"?"+n.join("&")},getLocationSearchParams:function(){var e={};return location.search.replace(/^\?/,"").split("&").forEach(function(t){var n;-1!==t.indexOf("=")&&(n=t.split("="),e[n[0]]=n[1])}),e}}}();e.exports=i},function(e,t,n){"use strict";var i={question:n(35)};e.exports=i},function(e,t,n){"use strict";var i=function(){function e(e){e.forEach(function(e){!function(e){if($("#detected_text_area_"+e.id).length>0)return;$("#q_markdown_img_"+e.id).after($('<div class="detected-text-area">').attr("id","detected_text_area_"+e.id).append($('<button class="btn btn-mini open-detected-text">').text("抽出されたテキストを確認").on("click",function(){$(this).siblings("#detected_text_"+e.id).slideDown(200),$(this).hide(),$(this).siblings(".close-detected-text").show()})).append($('<pre id="detected_text_'+e.id+'">').text(e.detected_text).hide()).append($('<button class="btn btn-mini close-detected-text">').text("閉じる").hide().on("click",function(){$(this).siblings("#detected_text_"+e.id).hide(),$(this).hide(),$(this).siblings(".open-detected-text").show()})))}(e)})}return{getDetectedTexts:function(t){$.get("/question/get_detected_texts.json",{id:t}).done(function(t){e(t.detected_texts)})},insertDetectedTexts:e}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{deleteComment:function(e,t,n,i,o){var r;confirm("コメントを削除しますか？")&&(r="/forum/"+t+"/thread/"+n+"/comment/"+i+"/delete.json",$.post(r,{user_id:e,forum_id:t,thread_id:n,comment_id:i,one_time_token:$(".one_time_token").val()}).done(function(e){o(e)}))},deleteThread:function(e,t,n,i){var o;confirm("スレッドを削除しますか？")&&(o="/forum/"+t+"/thread/"+n+"/delete.json",$.post(o,{user_id:e,forum_id:t,thread_id:n,one_time_token:$(".one_time_token").val()}).done(function(e){i&&i(e)}))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{toggle:function(e,t,n,i){var o=e.data("id"),r=e.data("like-token");e.hasClass("liked")?function(e,t,n,i,o){$.post("/like/off",{target:e,target_id:t,token:n,user_id:i,one_time_token:$(".one_time_token").val()}).done(function(e){o(e)})}(t,o,r,n,i.off):function(e,t,n,i,o){$.post("/like/on",{target:e,target_id:t,token:n,user_id:i,one_time_token:$(".one_time_token").val()}).done(function(e){o(e)})}(t,o,r,n,i.on)}}}();e.exports=i},function(e,t,n){"use strict";var i=n(39),o=n(40),r={token:i,callbacks:o};e.exports=r},function(e,t,n){"use strict";var i=function(){var e=!1;return{setup:function(t,n,i){var o,r=document.getElementById(t);return!e&&null!==r&&(Dotinstall.payment.callbacks.setFormSelector(t),Dotinstall.payment.callbacks.setSelectorsOfComponents(n),$.post("/payment/get_gpay_api_key.json",{prepare_token:$("#prepare_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){$("#prepare_token").remove(),$("#js_token").val(e.token),o=e.api_key}),void r.addEventListener("submit",function(e){var t={};return e.preventDefault(),function(e){var t;for(t=0;t<e.length;t++)document.getElementById(e[t]).disabled=!0}(n),t.cardno=document.getElementById("card_number").value,t.expire=100*(document.getElementById("card_expire_year").value-0)+(document.getElementById("card_expire_month").value-0),-1!==n.indexOf("card_name")&&(t.holdername=document.getElementById("card_name").value),-1!==n.indexOf("security_code")&&(t.securitycode=document.getElementById("security_code").value),Multipayment.init(o),Multipayment.getToken(t,i),!1}))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t;function n(){var t;for(t=0;t<e.length;t++)document.getElementById(e[t]).disabled=!1}function i(e){e-0<110?alert("カード番号に誤りがあります"):e-0<121?alert("有効期限に誤りがあります"):e-0<123?alert("セキュリティコードに誤りがあります"):e-0<133?alert("名義に誤りがあります"):alert("エラーが発生しました。しばらくしてからお試しください。")}return{changeCard:function(e){"000"!==e.resultCode?(i(e.resultCode),n()):function(e){$.post("/premium/change_card",{user_id:$("#user_id").val(),token:e.tokenObject.token,js_token:$("#js_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){$("#success_change_card").show(),document.getElementById(t).reset(),document.getElementById("js_token").value=e.js_token,n()}).fail(function(e){alert($.parseJSON(e.responseText).error.message),n()})}(e)},purchaseLicense:function(e){if("000"===e.resultCode)return e.tokenObject.isSecurityCodeSet?void function(e){$.post("/business/purchase",{holder_name:$("#card_name").val(),gpay_token:e.tokenObject.token,purchase_token:$("#purchase_token").val(),js_token:$("#js_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){location.href=e.next_location}).fail(function(e){alert($.parseJSON(e.responseText).error.message),n()})}(e):(alert("セキュリティコードを入力してください"),void n());i(e.resultCode),n()},registerPremium:function(e){"000"!==e.resultCode?(i(e.resultCode),n()):function(e){$.post("/premium/purchase",{user_id:$("#user_id").val(),payment_method_id:2,token:e.tokenObject.token,js_token:$("#js_token").val(),one_time_token:$(".one_time_token").val()}).done(function(e){location.href=e.next_location}).fail(function(e){alert($.parseJSON(e.responseText).error.message),n()})}(e)},setFormSelector:function(e){t=e},setSelectorsOfComponents:function(t){e=t}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t=n(42),i=n(43),o=n(44),r=n(45),s=90,a=[],u=!1;function c(){r.prepare(),r.nowLoading()}function d(e,t){return new Promise(function(n,i){!function i(o){return new Promise(function(n,i){setTimeout(function(){e(a[o],o),n(o+1)},0===o?0:t)}).then(function(e){e>=a.length?n():i(e)})}(0)}).then(function(){})}function l(e){return a[e]}function f(){var e=$("#side_editor_footer").is(":visible")?$("#side_editor_footer").outerHeight():0;return $("#side_tab_container").outerHeight()-$("#side_editor_tabs").outerHeight()-e-11}return{autoSave:t,apply:d,detectTabsScrollable:function(){$("#side_tab_container").width()-Dotinstall.sizes.sidebar.EDITOR_TABS_WIDTH<s?$("#side_editor_tabs_scroll").addClass("scrollable").width($("#side_tab_container").width()-s):$("#side_editor_tabs_scroll").removeClass("scrollable").width(Dotinstall.sizes.sidebar.EDITOR_TABS_WIDTH)},effect:i,get:l,getActiveEditor:function(e){var t;return $(e).each(function(e){$(this).hasClass("active")&&(t=e)}),l(t)},getNumEditors:function(){return a.length},init:function(t){if(void 0!==e)return!1;e=t},isEnabled:function(){return u},isFocused:function(){var e=0,t=!1;for(e=0;e<a.length;e++)a[e].isFocused()&&(t=!0);return t},keyBind:o,previewLoadingOn:c,preview:r,push:function(e){a.push(e)},resizeAll:function(){$("#side_editor_tab_content").height(f()),d(function(e,t){$(e.container).height(f()),e.resize()})},save:function(t,n){return new Promise(function(o,s){var a=t.container.dataset.filename;e.changes=JSON.stringify(t.changes),t.changes=[],c(),i.saving(t),t.savedValue=t.getValue(),e.files=[{filename:a,source:t.getValue()}],e.save_type=n,$.post("/editor/save.json",e).done(function(e){t.saved=!0,r.load(e.url),r.setUrlCache(a,e.url),i.saved(t,!1),o()})}).then(function(){})},saveSilently:function(t,n){return new Promise(function(i,o){var r=t.container.dataset.filename;t.savedValue=t.getValue(),e.changes=JSON.stringify([]),e.files=[{filename:r,source:t.getValue()}],e.save_type=n,$.post("/editor/save.json",e).done(function(e){t.saved=!0,i()})})},setDefaultActiveTab:function(){var e,t=Dotinstall.cookie.get("side_editor_active_tab");for(e=0;e<a.length;e++)if(t===a[e].container.dataset.filename)return $(".side-editor-tab").eq(e).find("a").click(),e;return $(".side-editor-tab").eq(0).find("a").click(),0},setIsEnabled:function(e){u=e},SAVE_TYPES:{AUTO:1,HOTKEY_SAVE:2,HOTKEY_RUN:3,PUSH_RUN:4},updateActiveTabCookie:function(e){Dotinstall.cookie.set("side_editor_active_tab",e.container.dataset.filename,86400)}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t=[];function n(){var e;if(0!==t.length){for(e=0;e<t.length;e++)(new Date).getTime()>t[e].executionTime&&i(t.splice(e,1)[0].editor);setTimeout(n,300)}}function i(t){t.savedValue!==t.getValue()&&(e.changes=JSON.stringify(t.changes),t.changes=[],t.savedValue=t.getValue(),e.files.push({filename:t.container.dataset.filename,source:t.getValue()}),e.save_type=Dotinstall.editor.SAVE_TYPES.AUTO,Dotinstall.editor.effect.saving(t),$.post("/editor/save.json",e).done(function(n){e.files=[],t.saved=!0,Dotinstall.editor.effect.saved(t,!0)}))}return{setParams:function(t){void 0===e&&((e={}).lesson_id=t.lesson_id||void 0,e.materials=t.materials||void 0,e.user_id=t.user_id||void 0,e.guest_token=t.guest_token||void 0,e.one_time_token=t.one_time_token||void 0,e.files=[])},pushToQueue:function(e){var i,o={};for(o.editor=e,o.executionTime=(new Date).getTime()+3e3,i=0;i<t.length;i++)if(t[i].editor===e)return t.splice(i,1),void t.push(o);t.push(o),n()}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t=1200,n=100,i=!1;function o(){$(".side-editor-saving").addClass("saving-hide").removeClass("saving-show")}function r(e){$(e.container).find(".ace_scrollbar-v").is(":visible")?($(".side-editor-saving").addClass("in-scrollable"),$(".side-editor-saved").addClass("in-scrollable")):($(".side-editor-saving").removeClass("in-scrollable"),$(".side-editor-saved").removeClass("in-scrollable"))}return{cancelIfShowing:function(){$(".side-editor-saving").hasClass("saving-show")&&(o(),i=!0)},saving:function(t){e=Date.now(),t&&r(t),$(".side-editor-saving").removeClass("saving-hide").addClass("saving-show")},saved:function s(a,u){u&&Date.now()<e+t?setTimeout(function(){s(a,u)},n):(a&&r(a),o(),i?i=!1:($(".side-editor-saved").removeClass("saved-hide").addClass("saved-show"),setTimeout(function(){$(".side-editor-saved").removeClass("saved-show").addClass("saved-hide")},2e3)))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{set:function(e){var t=new(0,ace.require("ace/keyboard/hash_handler").HashHandler);t.addCommand({name:"save",bindKey:{win:"ctrl-s",mac:"cmd-s"},exec:function(e){return Dotinstall.editor.save(e,Dotinstall.editor.SAVE_TYPES.HOTKEY_SAVE),!0},readOnly:!0}),t.addCommand({name:"run",bindKey:{win:"ctrl-r",mac:"cmd-r"},exec:function(e){return Dotinstall.editor.save(e,Dotinstall.editor.SAVE_TYPES.HOTKEY_RUN),!0},readOnly:!0}),t.addCommand({name:"playOrPause",bindKey:{win:"ctrl-enter",mac:"cmd-enter"},exec:function(e){return Dotinstall.videoController.playOrPause(),!0},readOnly:!0}),e.enableDebug&&t.addCommand({name:"resetGuideModal",bindKey:{win:null,mac:"cmd-shift-0"},exec:function(e){return Dotinstall.uiGuide.reset(document.getElementById("ui_guide_name_side_editor_intro").value),!0},readOnly:!0}),e.keyBinding.addKeyboardHandler(t),e.commands.removeCommand("showSettingsMenu")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o=!1,r={};return{init:function(o,r){e=o,t=r,n=document.createElement("iframe"),function(){var e;(i=document.createElement("div")).classList.add("side-preview-loading"),(e=document.createElement("i")).classList.add("fa"),e.classList.add("fa-spinner"),e.classList.add("fa-pulse"),e.classList.add("fa-3x"),i.appendChild(e)}(),e.classList.add("active")},isReady:o,nowLoading:function(){i.classList.add("show"),e.classList.add("loading")},prepare:function(){if(!0!==o){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(n),e.appendChild(i),o=!0}},run:function(e){n.src=r[e]},load:function(o){i.classList.remove("show"),e.classList.remove("loading"),n.src=o,t.href=o,t.target="dotinstall_editor_preview"},setUrlCache:function(e,t){r[e]=t}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=n(47);return{alert:n(49),settings:e}}();e.exports=i},function(e,t,n){"use strict";var i={autoplay:n(48)};e.exports=i},function(e,t,n){"use strict";var i=function(){return{enable:function(e){$(e).on("click",function(){$("#autoplay").is(":checked")?function(){if(void 0===HMHM.movie.videojs)return!1;void 0!==HMHM.movie.videojs.player_&&HMHM.movie.videojs.player_.on("ended",function(){HMHM.movie.videojs.on.ended()})}():function(){if(void 0===HMHM.movie.videojs)return!1;void 0!==HMHM.movie.videojs.player_&&HMHM.movie.videojs.player_.off("ended"),HMHM.movie.autoplay.removeAutoplayCookie()}(),$.post("/user/update_autoplay.json",{user_id:$("#user_id").val(),autoplay:$("#autoplay").is(":checked")?1:0,one_time_token:$(".one_time_token").val()})})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{closeVolumeAlert:function(e){$("#volume_alert_mask").hide(),Dotinstall.cookie.set("volume_alert_close",e,void 0,"/lessons/")}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=".tabs",t=".tab-body";function i(n){var i="tab_body_"+n.data("tab-id");n.addClass("active").siblings("li").removeClass("active"),$(t).each(function(){$(this).attr("id")===i&&($(this).show(),$(this).siblings().hide())}),!0===n.parent(e).data("tab-save")&&HMHM.cookie.set(n.parent(e).data("tabs-id"),n.data("tab-id"),2592e6,"/lessons/")}return{enable:function(){$(t).hide(),$(t+".active").show(),$(e+" > li").on("click",function(){i($(this))}),$(e).each(function(){!0===$(this).data("tab-save")&&function(t){var n,o;n=function(e){var t=[],n="";return e.children("li").each(function(){t.push($(this).data("tab-id"))}),n="tabs_state_"+t.join("_"),e.data("tabs-id",n),n}(t),null!==(o=HMHM.cookie.get(n))&&$(e+" > li").each(function(){$(this).data("tab-id")===o&&i($(this))})}($(this))})},scroll:n(51)}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e,t,n,i,o=100,r=300,s=0;function a(){return s>o?o:s}function u(){var e=i.width()-$(n).width()-s;return e>o?o:e}return{enable:function(o,c){e=document.getElementById(o),t=document.getElementById(c),n=function e(t){return t.parentNode?t.parentNode.classList.contains("tabs-scroll")?t.parentNode:e(t.parentNode):null}(e),i=$("#"+e.dataset.scrollTab),e.addEventListener("click",function(e){var t;e.preventDefault(),t=a(),i.animate({marginLeft:"+="+t+"px"},r),s-=t,n.classList.remove("scroll-end"),0===a()&&n.classList.remove("scroll-start")}),t.addEventListener("click",function(e){var t;e.preventDefault(),t=u(),i.animate({marginLeft:"-="+t+"px"},r),s+=t,n.classList.add("scroll-start"),0===u()&&n.classList.add("scroll-end")})}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){var e=!1;return{log:function(t){e||(e=!0,$.post("/guest/log",t))}}}();e.exports=i},function(e,t,n){"use strict";var i=function(){return{run:function(e,t,n){e.which===t&&n&&n(e)}}}();e.exports=i}]);